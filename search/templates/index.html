{% extends "base.html" %}

{% block extra-head %}
<script type="text/javascript">
function search() {
  $.get("/search/ajax/", {
    keyword: $("input#id_keyword").val(),
    position: $("input[name=position]:checked").val(),
    com_expiration: $("input#id_com_expiration").val(),
    net_expiration: $("input#id_net_expiration").val(),
    org_expiration: $("input#id_org_expiration").val(),
    len: $("input#id_len").val(),
    digits: $("input#id_digits").val(),
    dashes: $("input#id_dashes").val(),
    scowl10: $("input#id_scowl10").val(),
    scowl20: $("input#id_scowl20").val(),
    scowl35: $("input#id_scowl35").val(),
    scowl50: $("input#id_scowl50").val() },
  function(data) {
    $('tbody#results').html(data);
  });
}
$(document).ready(function() {
  $("input.text").keyup(search);
  $("input[name=position]").click(search);
});
</script>
{% endblock %}

{% block title %}Search{% endblock %}

{% block content %}
<h1>Search available domain names</h1>

{% if search_form.keyword.errors %}
<p class="error">{{ search_form.keyword.errors.0 }}</p>
{% endif %}

<form action="" method="get">
<table>
<thead>
<tr>
<td>{{ search_form.keyword }}</td>
<td>{{ search_form.com_expiration }}</td>
<td>{{ search_form.net_expiration }}</td>
<td>{{ search_form.org_expiration }}</td>
<td>{{ search_form.len }}</td>
<td>{{ search_form.digits }}</td>
<td>{{ search_form.dashes }}</td>
<td>{{ search_form.scowl10 }}</td>
<td>{{ search_form.scowl20 }}</td>
<td>{{ search_form.scowl35 }}</td>
<td>{{ search_form.scowl50 }}</td>
<td><input type="submit" name="search" value="Search" /></td>
<td></td>
</tr>
<tr>
<th>Name
<label for="id_position_0">
<input value="left" type="radio" name="position" id="id_position_0"  {% ifnotequal request.GET.position "right" %}checked="checked" {% endifnotequal %} />
left</label>
<label for="id_position_1">
<input  type="radio" value="right" name="position" id="id_position_1" {% ifequal request.GET.position "right" %}checked="checked" {% endifequal %} />
right</label>
</th>
<th>.com</th>
<th>.net</th>
<th>.org</th>
<th>Length</th>
<th>Digits</th>
<th>Dashes</th>
<th>SCOWL 10</th>
<th>SCOWL 20</th>
<th>SCOWL 35</th>
<th>SCOWL 50</th>
<th>Score</th>
</tr>
</thead>
<tbody id="results">
{% for score, domain in score_domain_list %}
<tr class="{% cycle 'row1' 'row2' %}">
<td>{{ domain.name }}</td>
<td>{% if domain.com_expiration %}{{ domain.com_expiration }}{% endif%}</td>
<td>{% if domain.net_expiration %}{{ domain.net_expiration }}{% endif%}</td>
<td>{% if domain.org_expiration %}{{ domain.org_expiration }}{% endif%}</td>
<td>{{ domain.len }}</td>
<td>{{ domain.digits }}</td>
<td>{{ domain.dashes }}</td>
<td>{% if domain.scowl10 %}{{ domain.rest }}{% endif%}</td>
<td>{% if domain.scowl20 %}{{ domain.rest }}{% endif%}</td>
<td>{% if domain.scowl35 %}{{ domain.rest }}{% endif%}</td>
<td>{% if domain.scowl50 %}{{ domain.rest }}{% endif%}</td>
<td>{{ score }}</td>
</tr>
{% endfor %}
</tbody>
</table>
</form>
{% endblock %}
